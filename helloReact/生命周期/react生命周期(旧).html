<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>
<div id="test"></div>
<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
<!-- 生产环境中不建议使用 -->
<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>

<script type="text/babel">
	// 创建ReactDom

	// 生命周期回调函数 <=> 生命周期钩子函数 <=> 生命周期函数 <=> 生命周期钩子
	// class MyComponent extends React.Component {
	//
	// 	// 构造器
	// 	constructor(props) {
	// 		console.log('log---constructor')
	// 		super(props)
	// 		// 初始化状态
	// 		this.state = {
	// 			count: 0,
	// 		}
	// 	}
	//
	// 	// 旧 组件将要挂载钩子
	// 	componentWillMount() {
	// 		console.log('log---componentWillMount')
	// 	}
	//
	// 	// setState 调用执行 1 新
	// 	// 1 新 -  控制组件更新的 “阀门”  如果参数是true那么就会往下走 / false 不会往下走
	// 	shouldComponentUpdate() {
	// 		console.log('log---shouldComponentUpdate')
	// 		// 写了必须返回一个true / false 不然报错
	// 		return true
	// 	}
	//
	// 	// 1 新 组件将要更新的钩子
	// 	componentWillUpdate() {
	// 		console.log('log---componentWillUpdate')
	// 	}
	//
	//
	// 	// 初始化渲染，状态更新之后
	// 	render() {
	// 		console.log('log---render')
	// 		const {count} = this.state
	// 		return (
	// 				<div>
	// 					<h2>当前求和为:{count}</h2>
	// 					<button onClick={this.add}>点我+1</button>
	// 					<button onClick={this.unAdd}>卸载组件</button>
	// 					<button onClick={this.upDate}>强制更新组件</button>
	// 				</div>
	// 		)
	// 	}
	//
	// 	// 旧 组件挂载完毕钩子
	// 	componentDidMount() {
	// 		console.log('log---componentDidMount')
	// 	}
	//
	// 	// 组件将要卸载钩子
	// 	componentWillUnmount() {
	// 		console.log('log---componentWillUnmount')
	// 	}
	//
	//
	// 	// 点击事件
	// 	add = () => {
	// 		// 初始化
	// 		let {count} = this.state
	// 		// count+1
	// 		count += 1
	// 		// 更新状态
	// 		this.setState({count})
	// 	}
	// 	// 卸载组件
	// 	unAdd = () => {
	// 		// 卸载节点
	// 		ReactDOM.unmountComponentAtNode(document.querySelector('#test'))
	// 	}
	//
	// 	// 强制更新
	// 	upDate = () => {
	// 		this.forceUpdate()
	// 	}
	//
	// }

	// 父组件
	class StartCounter extends React.Component {
		// 初始化状态
		state = {car: '宝马'}

		// 切换车
		but = () => {
			this.setState({car: '奔驰'})
		}

		render() {
			console.log('StartCounter-render')
			const {car} = this.state
			return (
					<div>
						<div>StartCounter</div>
						<button onClick={this.but}>点击切换车辆</button>
						<StartPins carName={car}/>
					</div>
			)
		}
	}

	// 子组件
	class StartPins extends React.Component {
		//  组件将要接收新的props的钩子
		// 坑： 第一次不会执行
		componentWillReceiveProps(props) {
			console.log('StartPins-componentWillReceiveProps', props)
		}

		// 控制组件更新的"阀门"
		shouldComponentUpdate() {
			console.log('StartPins-shouldComponentUpdate')
			return true
		}

		// 组件将要更新的钩子
		componentWillUpdate() {
			console.log('StartPins-componentWillUpdate')
		}

		render(e) {
			console.log('StartPins-render')
			return (
					<div>
						<div>pIns:{this.props.carName}</div>
					</div>
			)
		}

		// 组件更新完毕的钩子
		componentDidUpdate() {
			console.log('StartPins-componentDidUpdate')
		}

		// 组件将要卸载的钩子
		componentWillUnmount() {
			console.log('StartPins-componentWillUnmount')
		}
	}

	// 注入到Dom中 渲染
	ReactDOM.render(<StartCounter/>, document.querySelector('#test'))
</script>


</body>
</html>
